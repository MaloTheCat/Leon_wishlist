<% if user_signed_in? %>
  <h1>Welcome, <%= current_user.email %>!</h1>
  
  <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin-top: 2rem;">
    <div>
      <h2>My Gifts (<%= @my_gifts.count %>)</h2>
      <% if @my_gifts.any? %>
        <table style="width: 100%; border-collapse: collapse;">
          <thead>
            <tr style="background: #f8f9fa;">
              <th style="padding: 0.75rem; text-align: left; border-bottom: 2px solid #dee2e6;">Name</th>
              <th style="padding: 0.75rem; text-align: left; border-bottom: 2px solid #dee2e6;">Price</th>
              <th style="padding: 0.75rem; text-align: left; border-bottom: 2px solid #dee2e6;">Reserved</th>
            </tr>
          </thead>
          <tbody>
            <% @my_gifts.each do |gift| %>
              <tr>
                <td style="padding: 0.75rem; border-bottom: 1px solid #dee2e6;"><%= gift.name %></td>
                <td style="padding: 0.75rem; border-bottom: 1px solid #dee2e6;"><%= number_to_currency(gift.price) if gift.price %></td>
                <td style="padding: 0.75rem; border-bottom: 1px solid #dee2e6;">
                  <%= gift.reserved? ? "âœ… Yes" : "â¬œ No" %>
                </td>
              </tr>
            <% end %>
          </tbody>
        </table>
      <% else %>
        <p>You haven't added any gifts yet. <%= link_to "Add your first gift", new_gift_path %> or <%= link_to "import from a file", import_gifts_path %>.</p>
      <% end %>
      <div style="margin-top: 1rem;">
        <%= link_to "Manage My Gifts", gifts_path, style: "background: #007bff; color: white; padding: 0.5rem 1rem; text-decoration: none; border-radius: 4px; display: inline-block;" %>
      </div>
    </div>
    
    <div>
      <h2>My Groups (<%= @groups.count %>)</h2>
      <% if @groups.any? %>
        <ul style="list-style: none; padding: 0;">
          <% @groups.each do |group| %>
            <li style="padding: 0.75rem; margin-bottom: 0.5rem; background: #f8f9fa; border-radius: 4px;">
              <%= link_to group.name, group_path(group), style: "color: #007bff; text-decoration: none; font-weight: bold;" %>
              <span style="color: #6c757d; font-size: 0.9em;">(<%= group.users.count %> members)</span>
            </li>
          <% end %>
        </ul>
      <% else %>
        <p>You're not a member of any groups yet.</p>
      <% end %>
      <div style="margin-top: 1rem;">
        <%= link_to "Manage Groups", groups_path, style: "background: #28a745; color: white; padding: 0.5rem 1rem; text-decoration: none; border-radius: 4px; display: inline-block;" %>
      </div>
    </div>
  </div>
<% else %>
  <div style="text-align: center; padding: 4rem 2rem;">
    <h1>ğŸ„ Welcome to Leon's Christmas Wishlist ğŸ</h1>
    <p style="font-size: 1.2rem; margin: 2rem 0; color: #6c757d;">
      A simple way to manage Christmas gift lists and coordinate with your family and friends.
    </p>
    
    <div style="margin-top: 3rem;">
      <%= link_to "Sign Up", new_user_registration_path, style: "background: #28a745; color: white; padding: 1rem 2rem; text-decoration: none; border-radius: 4px; display: inline-block; margin-right: 1rem; font-size: 1.1rem;" %>
      <%= link_to "Sign In", new_user_session_path, style: "background: #007bff; color: white; padding: 1rem 2rem; text-decoration: none; border-radius: 4px; display: inline-block; font-size: 1.1rem;" %>
    </div>
    
    <div style="margin-top: 4rem; text-align: left; max-width: 600px; margin-left: auto; margin-right: auto;">
      <h2>Features:</h2>
      <ul style="font-size: 1.1rem; line-height: 2;">
        <li>âœ… Create and manage your own wishlist</li>
        <li>âœ… Join groups with family and friends</li>
        <li>âœ… Reserve gifts from others' lists</li>
        <li>âœ… Import gifts from spreadsheet files</li>
        <li>âœ… Privacy: you can't see who reserved your gifts</li>
      </ul>
    </div>
  </div>
<% end %>
